\                                                    cas 10nov05This file is used for reconfiguring the Forth System                                                                            You can only reconfigure a system that does not contain         any additional task.                                                                                                            INCLUDE SYSTEM.CFG will reconfigure and cold-boot the system.                                                                   Reconfiguration takes place by overwriting some cold-boot       literals that determine the location of the stacks and the      highest address used by the system which happens to be the      end of the topmost block-buffer.                                                                                                It can be used to tailor the size of an application below 64k   and to allocate more stack and/or dictionary space if necessary                                                                 \ stackdepth returnstackdepth #buffers --         ks 30 apr 88                                                                  3 arguments empty                                                                                                                : reconfigure   ( stack rstack #buffers -- )                       up@ 2+ @ 4+ Abort" no tasks allowed"                            b/buf * >r  2dup + 2+ 0  r> 0 d+                                IF  drop 0  cr ." fewer buffers allocated" bell  THEN           ['] limit >body !                                               over + ['] r0 >body c@ origin + !                                  6 - ['] s0 >body c@ origin + !  $80 off  cold ;                                                                           reconfigure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    