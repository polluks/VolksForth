\\ ƒIRECTORY ULTRA∆œ“‘» 3OF4   26OCT87RE                                          .                   &0                   ..                  &0                   ROM-RAM-SYS         &2                   ‘RANSIENT-¡SSEMBLER &4                   ¡SSEMBLER-6502      &5                   2WORDS             &14                   UNLINK             &15                   SCR<>CBM           &16                   (SEARCH            &17                   ≈DITOR             &19                   .BLK               &46                   ‘RACER/‘OOLS       &47                   ÕULTI-‘ASKER       &57                   ≈PSON“ÿ80          &63                   ÷√1526             &75                   √–-80              &78                                                                                                                                                                                                                                                                                                                 \\ √ONTENT VOLKS∆ORTH 3.81.02 CAS16AUG06                                                                                   ROM RAM SYS          2 - 3               ‘RANSIENT ¡SSEMBLER  4                   ¡SSEMBLER-6502       5 - 12                                  13       FREE        2WORDS              14                   UNLINK              15                   SCR<>CBM            16                   (SEARCH             17                   ≈DITOR              19                   .BLK                46                   ‘RACER ‘OOLS        47                   ÕULTI-‘ASKER        57                   –RINTER: ≈PSON“ÿ80  63                   –RINTER: ÷√1526     75                   –RINTER: √–-80      78                                                            ”HADOWS             85 ...                                                                                                                                                                                                                           \ ROM RAM SYS                 CAS16AUG06 \              ”HADOW WITH √TRL+◊--->                                             \ NEEDED FOR JUMPS                       \ IN THE “œÕ ¡REA                                                                 ¡SSEMBLER ALSO DEFINITIONS               (16 \ ”WITCH ¬ANK 8000-∆∆∆∆              : ROM HERE 9 + $8000 U> ABORT" NOT HERE"        $FF3E STA ;                       : RAM  $FF3F STA ;                       : SYS ROM JSR RAM ;                      \  IF SUFFERING FROM ABORT" NOT HERE"    \  SEE NEXT SCREEN ”CREEN --> √)                                                                                           (64 \ ”WITCH ¬ANK ¡000-¬∆∆∆              : ROM HERE 9 + $¡000 U> ABORT" NOT HERE"       $37 # LDA 1 STA ;                  : RAM $36 # LDA 1 STA ;                  √)                                                                                                                                                                                                          \ SYSÕACRO ÃONG               CAS16AUG06                                          (64  .( NOT FOR √64 !) \\ √)                                                      \ FOR ADVANCED USERS, USE MACROS                                                  HERE $8000 $20 - U> ?EXIT \ NOT POSSIBLE                                                                                   ' 0 ‹ ¡LIAS ???                                                                   ÃABEL LONG   “œÕ                         ÃABEL LONG1  ??? JSR  “¡Õ  RTS END-CODE                                           ‹ : SYSÕACRO ( ADR -- )                   $100 U/MOD  PHA  # LDA  LONG1 2+ STA     # LDA  LONG1 1+ STA  PLA  LONG JSR ;                                             : SYS ( ADR -- ) \ FOR  SR TO “œÕ         HERE 9 + $8000 U>                        …∆  SYSÕACRO  ≈Ã”≈  SYS  ‘»≈Œ ;                                                                                                                                                                            \ TRANSIENT ¡SSEMBLER         CLV10OCT87                                          \ ¬ASIS: ∆ORTH ƒIMENSIONS ÷œÃ ……… ŒO. 5)                                          \ INTERNAL LOADING         04MAY85¬–/RE)                                          HERE   $800 HALLOT  HEAP DP !                                                              1  +LOAD                                                                 DP !                                                                              œNLYFORTH                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \ ∆ORTH-6502 ¡SSEMBLER        CLV10OCT87                                          \ ¬ASIS: ∆ORTH ƒIMENSIONS ÷œÃ ……… ŒO. 5)                                          œNLYFORTH  ¡SSEMBLER ALSO DEFINITIONS                                             1 7  +THRU                                -3  +LOAD \ ÕAKROS: ROM RAM SYS                                                  œNLYFORTH                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      \ ∆ORTH-83 6502-¡SSEMBLER      20OCT87RE                                          : END-CODE   CONTEXT 2- @  CONTEXT ! ;                                            √REATE INDEX                             $0909 , $1505 , $0115 , $8011 ,          $8009 , $1ƒ0ƒ , $8019 , $8080 ,          $0080 , $1404 , $8014 , $8080 ,          $8080 , $1√0√ , $801√ , $2√80 ,                                                   ‹ ÷ARIABLE MODE                                                                   : ÕODE:  ( N -)   √REATE C,                ƒOES>  ( -)     C@ MODE ! ;                                                     0   ÕODE: .¡        1    ÕODE: #         2 ‹ ÕODE: MEM       3    ÕODE: ,ÿ        4   ÕODE: ,Ÿ        5    ÕODE: ÿ)        6   ÕODE: )Ÿ       $∆    ÕODE: )                                                                                                                                                                                                                                                              \ UPMODE  CPU                  20OCT87RE                                          ‹ : UPMODE ( ADDR0 F0 - ADDR1 F1)         …∆ MODE @  8 OR MODE !   ‘»≈Œ            1 MODE @  $∆ AND ?DUP …∆                 0 ƒœ  DUP +  Ãœœ– ‘»≈Œ                   OVER 1+ @ AND 0= ;                                                               : CPU  ( 8B -)   √REATE  C,                ƒOES>  ( -)    C@ C, MEM ;                                                       00 CPU BRK $18 CPU CLC $ƒ8 CPU CLD      $58 CPU CLI $¬8 CPU CLV $√¡ CPU DEX      $88 CPU DEY $≈8 CPU INX $√8 CPU INY      $≈¡ CPU NOP $48 CPU PHA $08 CPU PHP      $68 CPU PLA $28 CPU PLP $40 CPU RTI      $60 CPU RTS $38 CPU SEC $∆8 CPU SED      $78 CPU SEI $¡¡ CPU TAX $¡8 CPU TAY      $¬¡ CPU TSX $8¡ CPU TXA $9¡ CPU TXS      $98 CPU TYA                                                                                                                                                                                                                                          \ M/CPU                        20OCT87RE                                          : M/CPU  ( MODE OPCODE -)  √REATE C, ,    ƒOES>                                    DUP 1+ @ $80 AND …∆ $10 MODE +! ‘»≈Œ     OVER $∆∆00 AND UPMODE UPMODE             …∆ MEM TRUE ¡BORT" INVALID" ‘»≈Œ         C@ MODE @ INDEX + C@ + C, MODE @ 7 AND   …∆ MODE @  $∆ AND 7 <                     …∆ C, ≈Ã”≈ , ‘»≈Œ ‘»≈Œ MEM ;                                                    $1√6≈ $60 M/CPU ADC $1√6≈ $20 M/CPU AND  $1√6≈ $√0 M/CPU CMP $1√6≈ $40 M/CPU EOR  $1√6≈ $¡0 M/CPU LDA $1√6≈ $00 M/CPU ORA  $1√6≈ $≈0 M/CPU SBC $1√6√ $80 M/CPU STA  $0ƒ0ƒ $01 M/CPU ASL $0√0√ $√1 M/CPU DEC  $0√0√ $≈1 M/CPU INC $0ƒ0ƒ $41 M/CPU LSR  $0ƒ0ƒ $21 M/CPU ROL $0ƒ0ƒ $61 M/CPU ROR  $0414 $81 M/CPU STX $0486 $≈0 M/CPU CPX  $0486 $√0 M/CPU CPY $1496 $¡2 M/CPU LDX  $0√8≈ $¡0 M/CPU LDY $048√ $80 M/CPU STY  $0480 $14 M/CPU JSR $8480 $40 M/CPU JMP  $0484 $20 M/CPU BIT                                                                                                       \ ¡SSEMBLER CONDITIONALS       20OCT87RE                                          ‹ : RANGE?   ( BRANCH -- BRANCH )         DUP ABS  $7∆ U> ¡BORT" OUT OF RANGE " ;                                          : [[  ( ¬≈«…Œ)  HERE ;                                                            : ?]  ( ’Œ‘…Ã)  C, HERE 1+ - RANGE? C, ;                                          : ?[  ( …∆)     C,  HERE 0 C, ;                                                   : ?[[ ( ◊»…Ã≈)  ?[ SWAP ;                                                         : ]?  ( ‘»≈Œ)   HERE OVER C@  …∆ SWAP !   ≈Ã”≈ OVER 1+ - RANGE? SWAP C! ‘»≈Œ ;                                             : ][  ( ≈Ã”≈)   HERE 1+   1 JMP           SWAP HERE OVER 1+ - RANGE?  SWAP C! ;                                            : ]]  ( ¡«¡…Œ)  JMP ;                                                             : ]]? ( “≈–≈¡‘) JMP ]? ;                                                                                                                                           \ ¡SSEMBLER CONDITIONALS       20OCT87RE                                          $90 √ONSTANT √”     $¬0 √ONSTANT √√      $ƒ0 √ONSTANT 0=     $∆0 √ONSTANT 0<>     $10 √ONSTANT 0<     $30 √ONSTANT 0>=     $50 √ONSTANT ÷”     $70 √ONSTANT ÷√                                               : NOT    $20 [ ∆ORTH ] XOR ;                                                      : BEQ    0<> ?] ;   : BMI   0>= ?] ;     : BNE    0=  ?] ;   : BPL   0<  ?] ;     : BCC    √”  ?] ;   : BVC   ÷”  ?] ;     : BCS    √√  ?] ;   : BVS   ÷√  ?] ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \ 2INC/2DEC   WINC/WDEC        20OCT87RE                                          : 2INC  ( ADR -- )                        DUP LDA  CLC  2 # ADC                    DUP STA  √” ?[  SWAP 1+ INC  ]?  ;                                               : 2DEC  ( ADR -- )                        DUP LDA  SEC  2 # SBC                    DUP STA  √√ ?[  SWAP 1+ DEC  ]?  ;                                               : WINC  ( ADR -- )                        DUP INC  0= ?[  SWAP 1+ INC  ]?  ;                                               : WDEC  ( ADR -- )                        DUP LDA  0= ?[  OVER 1+ DEC  ]?  DEC  ;                                          : ;C:                                     RECOVER JSR  END-CODE ]  0 LAST !  0 ;                                                                                                                                                                                                                                                                                                \ ;CODE √ODE CODE>          BP/RE03FEB85                                          œNLYFORTH                                                                         : ¡SSEMBLER                               ¡SSEMBLER   [ ¡SSEMBLER ] MEM ;                                                  : ;√ODE                                   [COMPILE] ƒOES>  -3 ALLOT                [COMPILE] ;      -2 ALLOT   ¡SSEMBLER ; IMMEDIATE                                                                         : √ODE  √REATE HERE DUP 2- ! ¡SSEMBLER ;                                          : >LABEL  ( ADR -)                        HERE ‹ √REATE  IMMEDIATE  SWAP ,         4 HALLOT HEAP 1 AND HALLOT ( 6502-ALIG)  HERE 4 - HEAP  4  CMOVE                  HEAP LAST @ COUNT $1∆ AND + !  DP !       ƒOES>  ( - ADR)   @                      STATE @ …∆  [COMPILE] ÃITERAL  ‘»≈Œ ;                                           : ÃABEL                                   [ ¡SSEMBLER ]  HERE >LABEL ¡SSEMBLER ;                                          \ FREE                        CAS16AUG06                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \ 2! 2@ 2VARIABLE 2CONSTANT CLV20AUG87RE                                          √ODE 2!  ( D ADR --)                      TYA  SETUP JSR  3 # LDY                  [[  ”– )Ÿ LDA  Œ )Ÿ STA  DEY  0< ?]      1 # LDY  –OPTWO JMP  END-CODE                                                    √ODE 2@  ( ADR -- D)                      ”– ÿ) LDA  Œ STA  ”– )Ÿ LDA  Œ 1+ STA    ”– 2DEC  3 # LDY                         [[  Œ )Ÿ LDA  ”– )Ÿ STA  DEY  0< ?]      XYŒEXT JMP  END-CODE                                                             : 2÷ARIABLE  ( --)   √REATE 4 ALLOT ;                 ( -- ADR)                                                            : 2√ONSTANT  ( D --)   √REATE , ,          ƒOES> ( -- D)   2@ ;                                                            \ 2DUP  EXISTS                           \ 2SWAP EXISTS                           \ 2DROP EXISTS                                                                                                                                                     \ UNLINK                    CLV20AUG87RE                                          $∆∆∆0 >LABEL PLOT                                                                 (64                                                                               √ODE UNLINK  ( -- )                        $288 LDA  $80 # ORA  TAY  TXA            [[  $ƒ9 ,ÿ STY  CLC  $28 # ADC            √” ?[  INY  ]?  INX  $1¡ # CPX  0= ?]   $ƒ3 LDA  $28 # CMP                       √” ?[  $28 # SBC  $ƒ3 STA  ]?            $ƒ3 LDY  $ƒ6 LDX  CLC  PLOT JSR √)                                              (16 : UNLINK  0 0  $7≈≈ 2! ; √)                                                   ÃABEL SETPTRS                             0 # LDX  1 # LDY  ŒEXT JMP  END-CODE                                                                                                                                                                                                                                                                                                  \ CHANGING CODES              CAS16AUG06                                          ( MAPPING COMMODORE SCREEN CODES       )                                                                                   ÃABEL (SCR>CBM                            Œ 6 + STA $3∆ # AND  Œ 6 + ASL           Œ 6 + BIT  0< ?[ $80 # ORA  ]?                      ÷√ ?[ $40 # ORA  ]?  RTS                                              ÃABEL (CBM>SCR                            Œ 6 + STA $7∆ # AND $20 # CMP            √” ?[ $40 # CMP                             √” ?[ $1∆ # AND  Œ 6 + BIT                  0< ?[ $40 # ORA  ]?  ]?  RTS  ]?   ¡SCII . # LDA  RTS                                                               √ODE CBM>SCR  ( 8B1 -- 8B2)               ”– ÿ) LDA  (CBM>SCR JSR  ”– ÿ) STA       ŒEXT JMP  END-CODE                                                               √ODE SCR>CBM  ( 8B1 -- 8B2)               ”– ÿ) LDA  (SCR>CBM JSR  ”– ÿ) STA       ŒEXT JMP  END-CODE                                                              \ FAST SEARCH                 CAS16AUG06                                          \NEEDS √ODE -$ƒ +LOAD \ ‘RANS ¡SSEMBLER                                           œNLYFORTH                                                                          ' 0< @ 4 +  >LABEL PUTTRUE              PUTTRUE 3 +  >LABEL PUTFALSE                                                      √ODE (SEARCH                             ( TEXT TLEN BUFFER BLEN -- ADR TF / FF)   7 # LDY                                  [[  ”– )Ÿ LDA  Œ ,Ÿ STA DEY  0< ?]       [[ Œ 4 + LDA  Œ 5 + ORA  0<> ?[          [[ Œ     LDA   Œ 1+ ORA  0<> ?[             Œ 2+ ÿ) LDA  Œ 6 + ÿ) CMP  SWAP          0<> ?[[  Œ WDEC  Œ 2+ WINC  ]]?                                               -->                                                                                                                                                                                                                                                                                           \ ≈DIOR FAST SEARCH           CAS16AUG06                                           7 # LDY                                  [[  Œ ,Ÿ LDA  ”– )Ÿ STA  DEY  0< ?]      [[  Œ 2+ WINC  Œ 6 + WINC  Œ WDEC        Œ 4 + WDEC  Œ 4 + LDA  Œ 5 + ORA         0= ?[  ”– LDA  CLC  4 # ADC  ”– STA             √” ?[  ”– 1+ INC  ]?                     3 # LDY  Œ 3 + LDA  ”– )Ÿ STA            Œ 2+ LDA  DEY  ”– )Ÿ STA  DEY            PUTTRUE JMP  ]?                   Œ LDA  Œ 1+ ORA  0= ?[                   3 ROLL  3 ROLL ]? ]?                     ”– LDA  CLC  6 # ADC  ”– STA             √” ?[  ”– 1+ INC ]?   1 # LDY            PUTFALSE JMP  ]?                         Œ 2+ ÿ) LDA  Œ 6 + ÿ) CMP  0= NOT ?]     7 # LDY                                  [[ ”– )Ÿ LDA  Œ ,Ÿ STA  DEY  0< ?]       Œ WDEC  Œ 2+ WINC                        ( NEXT CHAR AS FIRST )  ]]  END-CODE                                                                                                                                                                       \ ≈DITOR LOADSCREEN           CLV13JUL87 \ …DEA AND FIRST IMPLEMENTATION:  ◊≈/RE                                           œNLYFORTH                                \NEEDS .BLK       $1¬ +LOAD \ .BLK       \NEEDS √ODE       -$∆ +LOAD \ ¡SSEMBL    \NEEDS (SEARCH     -2 +LOAD \ (SEARCH                                             œNLYFORTH                                (64 ‹ : AT  AT CUROFF ; √) \ SORRY                                                \NEEDS 2VARIABLE  -5 +LOAD               \NEEDS UNLINK     -4 +LOAD  \ UNLINK     \NEEDS SCR>CBM    -3 +LOAD  \ CBM><SCR                                            ÷OCABULARY ≈DITOR                        ≈DITOR ALSO DEFINITIONS                                                                           1 $17 +THRU  \ ≈DITOR                  $18 $19 +THRU  \ EDIT-VIEW                   $1¡ +LOAD  \ ≈DIBOARD                                           œNLYFORTH  1 SCR !  0 R# !                                                        SAVE                                    \ ≈DI √ONSTANTS ÷ARIABLES     CLV15JUL87                                          $28 ‹ √ONSTANT #COL $19 ‹ √ONSTANT #ROW  #COL  #ROW  *           ‹ √ONSTANT B/SCR   ÷ARIABLE SHADOW   $55 SHADOW !         ‹ ÷ARIABLE ASCR     1 ASCR !             ‹  ÷ARIABLE IMODE   IMODE OFF            ‹ ÷ARIABLE CHAR     #CR CHAR !           ‹ ÷ARIABLE SCROLL   SCROLL ON            ‹ ÷ARIABLE SEND     1 SEND !             ‹ 2VARIABLE CHARS   ‹ 2VARIABLE LINES    ‹ 2VARIABLE FBUF    ‹ 2VARIABLE RBUF                                              (64 $288 √)  (16 $53E √)  >ÃABEL SCRADR  (64 $D800 √) (16 $800 √)  >ÃABEL COLADR                                           $D1  (16 DROP $C8 √) ‹ √ONSTANT LINPTR   $D3  (16 DROP $CA √) ‹ √ONSTANT CUROFS                                            (64 $ƒ020 √) (16 $FF19 √)                 ‹ √ONSTANT BORDER                       (64 $286  √) (16 $53B √) ‹ √ONSTANT PEN  (64 $D021 √) (16 $FF15 √)                 ‹ √ONSTANT BKGRND                                                               \ ≈DI SPECIAL CMOVES          CAS16AUG06 ( THANKS TO COMMODORE....          )                                              ÃABEL INCPOINTER                          Œ    LDA  CLC  #COL 1+ # ADC             Œ    STA  √” ?[  Œ 1+  INC  ]?           Œ 2+ LDA  CLC  #COL    # ADC             Œ 2+ STA  √” ?[  Œ 3 + INC  ]?  RTS                                              ‹ √ODE B>SC   ( BLKADR --)                TYA  SETUP JSR                           Œ 2+ STX  SCRADR LDA  Œ 3 + STA          #ROW # LDX                               [[  #COL 1- # LDY                            [[  Œ    )Ÿ LDA  (CBM>SCR JSR                Œ 2+ )Ÿ STA  DEY  0< ?]              INCPOINTER JSR  DEX                  0= ?]                                    PEN LDA                                  [[ COLADR        ,ÿ STA                     COLADR $100 + ,ÿ STA                     COLADR $200 + ,ÿ STA                     COLADR $300 + ,ÿ STA                     INX  0= ?]  SETPTRS JMP   END-CODE                                           \ ≈DI SPECIAL CMOVES CONT.    CAS16AUG06 ( ... FOR SCREEN FORMAT                )                                          ‹ √ODE SC>B   ( BLKADR --)                TYA  SETUP JSR                           Œ 2+ STX  SCRADR LDA  Œ 3 + STA          #ROW # LDX                               [[  0 # LDY                                  [[  Œ 2+ )Ÿ LDA  (SCR>CBM JSR                Œ )Ÿ STA  INY  #COL # CPY √” ?]      DEX                                  0<> ?[[                                      BL # LDA  Œ )Ÿ STA                       INCPOINTER JSR                       ]]?  SETPTRS JMP  END-CODE                                                       ‹ √ODE >SCRMOVE  ( FROM TO 8BQUAN --)     3 # LDA  SETUP JSR  DEY                  [[  Œ CPY  0= ?[  SETPTRS JMP  ]?            Œ 4 + )Ÿ LDA  (CBM>SCR JSR               Œ 2+  )Ÿ STA  INY  0= ?]  END-CODE                                                                                                                                                                     \ ≈DI CHANGED?                CAS16AUG06                                          ‹ √ODE CHANGED?   ( BLKADR -- F)          TYA  SETUP JSR                           Œ 2+ STX  SCRADR LDA  Œ 3 + STA          #ROW # LDX                               [[  #COL 1- # LDY                            [[  Œ )Ÿ LDA  (CBM>SCR JSR                   Œ 2+ )Ÿ CMP                              0<> ?[  $∆∆ # LDA  –USH¡ JMP ]?          DEY 0<  ?]                           INCPOINTER JSR  DEX                  0= ?]                                    TXA  –USH¡ JMP  END-CODE                                                         ‹ : MEMTOP  SP@ #COL 2* - ;                                                                                                                                                                                                                                                                                                                                                                                              \ ≈DI C64-SPECIALS           CLV2:JULL87                                          ‹ √ODE SCRSTART  ( -- ADR)                TXA PHA SCRADR LDA  –USH JMP END-CODE                                                                                     ‹ √ODE ROWADR  ( -- ADR)                  CUROFS LDA  #COL # CMP  TXA              √” ?[  #COL 1- # LDA  ]?                 LINPTR ADC PHA LINPTR 1 + LDA  0 # ADC   –USH JMP  END-CODE                                                               ‹ √ODE CURADR  ( -- ADR)                  CLC CUROFS LDA LINPTR ADC  PHA           LINPTR 1 + LDA 0 # ADC –USH JMP          END-CODE                                (64                                      ‹ √ODE UNLINKED?     \ -- F               $ƒ5 LDA  #COL # CMP  √√ ?[  DEX  ]?      TXA  –USH¡ JMP  END-CODE √)                                                                                                                                                                                                                         \ ≈DI SCROLL? PUT/INSERT/DO  CLV2:JULL87                                          ‹ : BLANK.END?  ( -- F)                   SCRSTART [ B/SCR #COL - ] ÃITERAL +      #COL -TRAILING NIP  0=  SCROLL @ OR ;                                            ‹ : ATLAST?  ( -- F)                      CURADR  SCRSTART B/SCR + 1-  =           SCROLL @ 0=  AND ;                                                               ‹ : PUTCHAR  ( -- F)                      CHAR C@ CON! FALSE ;                                                             ‹ : INSERT  ( -- F)                       ATLAST?  ?DUP ?EXIT                     (64  UNLINKED? √) (16 TRUE √)             ROWADR #COL + 1- C@  BL = NOT  AND       BLANK.END? NOT  AND  DUP ?EXIT           $94 CON! ;                                                                       ‹ : DOCHAR  ( -- F)                       ATLAST?  ?DUP ?EXIT                      IMODE @ …∆ INSERT ?DUP ?EXIT             ‘»≈Œ PUTCHAR ;                                                                  \ ≈DI CURSOR CONTROL          CAS16AUG06                                          ‹ : CURDOWN  ( -- F)                      SCROLL @ 0=  ROW  #ROW 2-  U>  AND       DUP ?EXIT $11 CON! ;                                                             ‹ : CURRITE  ( -- F)                      ATLAST? DUP ?EXIT $1ƒ CON! ;                                                     ' PUTCHAR ‹ ¡LIAS CURUP                  ' PUTCHAR ‹ ¡LIAS CURLEFT                ' PUTCHAR ‹ ¡LIAS HOME                   ' PUTCHAR ‹ ¡LIAS DELETE                                                          ‹ : >""END  ( -- FF)                      SCRSTART B/SCR -TRAILING NIP             B/SCR 1- MIN #COL /MOD SWAP AT FALSE ;                                           ‹ : +TAB  ( -- F)                         0  $A 0 ƒœ  DROP CURRITE DUP                        …∆ Ã≈¡÷≈ ‘»≈Œ  Ãœœ– ;                                                 ‹ : -TAB  ( -- F)                         5 0 ƒœ $9ƒ CON!  Ãœœ–  FALSE ;                                                  \ ≈DI CR, CLEAR/NEWLINE       CAS16AUG06                                          ‹ : <CR>  ( -- F)                         ROW 0 AT  UNLINK  IMODE OFF  CURDOWN ;                                           ‹ : CLRLINE  ( -- FF)                     ROWADR #COL BL FILL FALSE ;                                                      ‹ : CLRRIGHT  ( -- FF)                    CURADR #COL COL - BL FILL FALSE ;                                                ‹ : KILLINE  ( -- F)                      ROWADR DUP #COL + SWAP                   SCRSTART $3√0 + DUP >R                   OVER - CMOVE                             R> #COL BL FILL FALSE ;                                                          ‹ : NEWLINE  ( -- F)                      BLANK.END? NOT  ?DUP ?EXIT               ROWADR DUP #COL + SCRSTART B/SCR +       OVER - CMOVE>  CLRLINE ;                                                                                                                                                                                   \ ≈DI CHARACTER HANDLING      CAS16AUG06                                          ‹ : DCHAR  ( -- F)                        CURRITE  DUP ?EXIT $14 CON! ;                                                    ‹ : @CHAR  ( -- F)                        CHARS 2@ + 1+  LINES @ MEMTOP MIN        U>  DUP ?EXIT                            CURADR C@  CHARS 2@ +  C!                1 CHARS 2+ +! ;                                                                  ‹ : COPYCHAR  ( -- F)                     @CHAR  ?DUP ?EXIT  CURRITE ;                                                     ‹ : CHAR>BUF  ( -- F)                     @CHAR  ?DUP ?EXIT  DCHAR ;                                                       ‹ : BUF>CHAR  ( -- F)                     CHARS 2+ @ 0=  ?DUP ?EXIT                INSERT        DUP ?EXIT                  -1 CHARS 2+ +!                           CHARS 2@ +  C@  CURADR C! ;                                                                                                                                       \ ≈DI LINE HANDLING, IMODE    CAS16AUG06                                          ‹ : @LINE  ( -- F)                        LINES 2@ +  MEMTOP  U>  DUP ?EXIT        ROWADR  LINES 2@ +  #COL  CMOVE          #COL LINES 2+ +! ;                                                               ‹ : COPYLINE  ( -- F)                     @LINE  ?DUP ?EXIT  CURDOWN ;                                                     ‹ : LINE>BUF  ( -- F)                     @LINE  ?DUP ?EXIT  KILLINE ;                                                     ‹ : !LINE  ( --)                          #COL NEGATE LINES 2+ +!                  LINES 2@ +  ROWADR  #COL  CMOVE  ;                                               ‹ : BUF>LINE  ( -- F)                     LINES 2+ @ 0=  ?DUP ?EXIT                NEWLINE  DUP ?EXIT  !LINE ;                                                      ‹ : SETIMD  ( -- F)   IMODE ON FALSE ;                                            ‹ : CLRIMD  ( -- F)   IMODE OFF FALSE ;                                          \ ≈DI THE STAMP               CAS16AUG06                                          ∆ORTH DEFINITIONS                        : RVSON $12 CON! ;  : RVSOFF $92 CON! ;                                           √ODE ***VOLKS∆œ“‘»83***                       ŒEXT HERE 2- !  END-CODE            : ∆ORTH-«ESELLSCHAFT   [COMPILE] \\ ;    IMMEDIATE                                                                         ≈DITOR DEFINITIONS                       √REATE STAMP$ $12 ALLOT STAMP$ $12 ERASE                                          ‹ : .STAMP  ( -- FF)                      STAMP$ 1+ COUNT  SCRSTART #COL +         OVER -   SWAP >SCRMOVE FALSE ;                                                   : GETSTAMP  ( --)                         INPUT PUSH  KEYBOARD  STAMP$ ON          CR ." YOUR STAMP: "  RVSON $10 SPACES    ROW $√ AT  STAMP$ 2+ $10 EXPECT          RVSOFF  SPAN @ STAMP$ 1+ C! ;                                                    ‹ : STAMP?  ( --)                         STAMP$ C@ ?EXIT GETSTAMP ;             \ ≈DI THE SCREEN#             CAS16AUG06                                          ‹ : SAVETOP  ( --)                        SCRSTART PAD #COL 2* CMOVE               SCRSTART #COL 2* $¡0 FILL ;             ‹ : RESTTOP  ( --)                        PAD SCRSTART #COL 2* CMOVE ;            ‹ : UPDATED?  ( SCR# -- N)                BLOCK 2- @ ;                            ‹ : SPECIAL  ( --)                        CURON ¬≈«…Œ PAUSE KEY? ’Œ‘…Ã CUROFF ;                                            ‹ : DRV”CR ( --DRV SCR')                  SCR @ OFFSET @ + BLK/DRV U/MOD SWAP ;                                            ‹ : .SCR#  ( -- FF) AT? SAVETOP  RVSON    0 0 AT DRV”CR ." ”CR # " . ." ƒRV " .    SCR @ UPDATED? 0=                        …∆ ." NOT " ‘»≈Œ ." UPDATED"  1 1 AT     [ ' ***VOLKS∆œ“‘»83*** >NAME ] ÃITERAL   COUNT TYPE 2 SPACES                      [ ' ∆ORTH-«ESELLSCHAFT >NAME ] ÃITERAL   COUNT $1∆ AND TYPE                       RVSOFF AT SPECIAL RESTTOP FALSE ;                                               \ ≈DI EXITS                   CAS16AUG06                                          ‹ : AT?>R#  ( --)                         AT? SWAP #COL 1+ * + R# ! ;                                                      ‹ : R#>AT  ( --)                          R# @  DUP  #COL 1+  MOD  #COL =  -       B/BLK 1- MIN  #COL 1+  /MOD  SWAP AT ;                                           ‹ : CANCEL  ( -- N)                       UNLINK  %0001  AT?>R# ;                                                          ‹ : EUPDATE ( -- N)                       CANCEL  SCR @ BLOCK CHANGED?             …∆ .STAMP DROP  SCR @ BLOCK SC>B            UPDATE %0010 OR ‘»≈Œ ;                                                        ‹ : ESAVE   ( -- N)   EUPDATE %0100 OR ;                                          ‹ : ELOAD   ( -- N)   ESAVE   %1000 OR ;                                                                                                                                                                                                             \ LEAF THRU ≈DI               CLV01AUG87                                          ‹ : ELIST  ( -- FF)                       SCR @ BLOCK B>SC  IMODE OFF  UNLINK      R#>AT  FALSE ;                                                                   ‹ : NEXT    ( -- FF)                      EUPDATE DROP  1 SCR +!  ELIST ;                                                  ‹ : BACK    ( -- FF)                      EUPDATE DROP -1 SCR +!  ELIST ;                                                  ‹ : >SHADOW  ( -- FF)                     EUPDATE DROP  SHADOW @ DUP DRV”CR NIP    U> NOT …∆ NEGATE ‘»≈Œ  SCR +!  ELIST ;                                           ‹ : ALTER  ( -- FF)                       EUPDATE DROP  ASCR @  SCR @              ASCR !  SCR !  ELIST ;                                                                                                                                                                                                                                                                       \ ≈DI DIGITS                    2OCT87RE                                          ∆ORTH DEFINITIONS                                                                 : DIGDECODE  ( ADR CNT1 KEY -- ADR CNT2)  #BS CASE?   …∆  DUP  …∆                                  DEL 1- ‘»≈Œ EXIT ‘»≈Œ    #CR CASE?   …∆  DUP SPAN !  EXIT ‘»≈Œ    CAPITAL DUP DIGIT?                       …∆  DROP >R 2DUP + R@ SWAP C!                R> EMIT  1+  EXIT  ‘»≈Œ  DROP ;                                              …NPUT: DIGITS                             C64KEY C64KEY? DIGDECODE C64EXPECT ;                                             ≈DITOR DEFINITIONS                                                                ‹ : REPLACE  ( -- F)                      FBUF @ 0 ƒœ  #BS CON!  Ãœœ–              FALSE RBUF @ 0 ƒœ INSERT OR Ãœœ–         DUP ?EXIT                                RBUF 2@ CURADR SWAP >SCRMOVE             EUPDATE DROP ;                                                                                                           \ ≈DI >BUFS                   CAS16AUG06                                          ‹ : .BUF  ( ADR COUNT --)                 TYPE ¡SCII < EMIT                        #COL 1- COL - SPACES ;                                                           ‹ : >BUFS  ( --)                          INPUT PUSH                               UNLINK SAVETOP AT?  RVSON                1 0 AT ." REPLACE WITH: "                AT? RBUF 2@ .BUF                         0 0 AT ." >     SEARCH: "                AT? FBUF 2@ .BUF                         0 2  2DUP AT  SEND @ 3 U.R  2DUP AT      HERE 1+ 3 DIGITS EXPECT  SPAN @ ?DUP     …∆  HERE UNDER C!  NUMBER DROP SEND !        ‘»≈Œ  AT  SEND @ 3 U.R  KEYBOARD     2DUP AT FBUF 2+ @  #COL 2- COL - EXPECT  SPAN @ ?DUP …∆  FBUF !  ‘»≈Œ             AT FBUF 2@ .BUF                          2DUP AT RBUF 2+ @  #COL 2- COL - EXPECT  SPAN @ ?DUP …∆  RBUF !  ‘»≈Œ             AT RBUF 2@ .BUF                          RVSOFF RESTTOP AT ;                                                             \ ≈DI ESEARCH                 CLV06AUG87                                          ‹ : (F      ELIST DROP                    FBUF 2@  R# @  SCR @ BLOCK  +            B/BLK R# @ - (SEARCH 0=                  …∆  0  ≈Ã”≈  SCR @ BLOCK -  ‘»≈Œ         R# !  R#>AT ;                                                                    ‹ : ESEARCH  ( -- F)                      EUPDATE DROP  >BUFS                      ¬≈«…Œ ¬≈«…Œ  (F  R# @                          ◊»…Ã≈  KEY  DUP ¡SCII R =                       …∆ REPLACE ?DUP                             …∆ NIP EXIT ‘»≈Œ ‘»≈Œ                 3 = ?DUP ?EXIT                    “≈–≈¡‘  DRV”CR NIP SEND @ -              STOP? 0= AND ?DUP                  ◊»…Ã≈ 0< …∆   NEXT DROP                           ≈Ã”≈ BACK DROP ‘»≈Œ             “≈–≈¡‘ TRUE ;                                                                                                                                                                                                                                       \ ≈DI KEYTABLE                CAS16AUG06 ‹ : √TRL  ( -- 8B)                        [COMPILE] ¡SCII $40 - ; IMMEDIATE       ‹ √REATE KEYTABLE                        √TRL N C, √TRL B C, √TRL W C, √TRL A C,  $1∆ C, (64 √TRL ^ √)      (16 $92 √) C,  $0ƒ C,   $8ƒ C,                          √TRL C C, √TRL X C, √TRL F C, √TRL L C,  $85 C,   $89 C,    $86 C,    $8¡ C,      $9∆ C,   $1√ C, (64 00 √) (16 $1E √) C,  $8¬ C,   $87 C,    $88 C,    $8√ C,      $1ƒ C,   $11 C,    $9ƒ C,    $91 C,      $13 C,   $93 C,    $94 C,                $14 C,    √TRL D C, √TRL E C, √TRL R C,  √TRL I C, √TRL O C,                                                   $FF C,                                                                                                                                                                                                                                                                                                                                                                                      \ ≈DI ACTIONTABLE             CAS16AUG06                                                                                   ‹ √REATE ACTIONTABLE ]                   NEXT      BACK      >SHADOW   ALTER      ESEARCH   COPYLINE                       <CR>      <CR>                           CANCEL    EUPDATE   ESAVE     ELOAD      NEWLINE   KILLINE   BUF>LINE  LINE>BUF   .STAMP    .SCR#           COPYCHAR       CHAR>BUF  BUF>CHAR  +TAB      -TAB       CURRITE   CURDOWN   CURLEFT   CURUP      HOME      >""END    INSERT               DELETE    DCHAR     CLRLINE   CLRRIGHT   SETIMD    CLRIMD                                                       DOCHAR  [  ‹ √ODE FINDKEY  ( KEY N -- ADR)           2 # LDA  SETUP JSR  Œ LDY  DEY           [[  INY  KEYTABLE ,Ÿ LDA  $∆∆ # CMP          0<> ?[  Œ 2+ CMP  ]?  0= ?]          TYA  .¡ ASL  TAY                         ACTIONTABLE    ,Ÿ LDA  PHA               ACTIONTABLE 1+ ,Ÿ LDA  –USH JMP         END-CODE                                                                         \ ≈DI SHOW ERRORS             CAS16AUG06                                                                                   ' 0   ‹ ¡LIAS DARK                                                                ' 1   ‹ ¡LIAS LIGHT                                                               ‹ : HALF  ( N --)                         BORDER C!  PAUSE $80 0 ƒœ Ãœœ– ;                                                 ‹ : BLINK ( --)                           BORDER PUSH  DARK HALF LIGHT HALF                     DARK HALF LIGHT HALF ;                                              ‹ : ?BLINK ( F1 -- F2)                    DUP TRUE = …∆  BLINK 0=  ‘»≈Œ ;                                                                                                                                                                                                                                                                                                                                                                                         \ ≈DI INIT                    CAS16AUG06                                          ' ÃITERAL ‹ ¡LIAS ÃI  IMMEDIATE                                                   ÷ARIABLE (PAD       0 (PAD !                                                      ‹ : CLEARBUFFER  ( --)                    PAD       DUP  (PAD  !                   #COL 2* + DUP  FBUF  2+ !                #COL    + DUP  RBUF  2+ !                #COL    + DUP  CHARS !                   #COL 2* +      LINES !                   CHARS 2+ OFF  LINES 2+ OFF               [ ' ***VOLKS∆œ“‘»83*** >NAME ] ÃI        COUNT >R FBUF 2+ @ R@ CMOVE R> FBUF !    [ ' ∆ORTH-«ESELLSCHAFT >NAME ] ÃI        COUNT $1∆ AND >R                         RBUF 2+ @ R@ CMOVE R> RBUF ! ;                                                   ‹ : INITPTR ( --)                         PAD (PAD @ = ?EXIT CLEARBUFFER ;                                                                                                                                                                           \ ≈DI SHOW                    CAS16AUG06                                          ' NAME >BODY 6 +  ‹ √ONSTANT 'NAME       (16 \ C16 IS USING STANDARD √)                                                    (64                                      ‹ √ODE CURON                              $ƒ3 LDY    $ƒ1 )Ÿ LDA  $√≈ STA           $80 # EOR  $ƒ1 )Ÿ STA                    XYŒEXT JMP  END-CODE                                                             ‹ √ODE CUROFF                             $√≈ LDA  $ƒ3 LDY  $ƒ1 )Ÿ STA             XYŒEXT JMP  END-CODE                                                             √)                                                                                                                                                                                                                                                                                                                                                                                                                       \ ≈DI SHOW                    CAS16AUG06                                          ‹ : SHOWOFF                               ['] EXIT 'NAME !  RVSOFF  CUROFF ;                                               ‹ : SHOW  ( --)                           BLK @ ?DUP 0= …∆  SHOWOFF EXIT  ‘»≈Œ     >IN @ 1-  R# !  RVSOFF CUROFF RVSON      SCR @  OVER - …∆  SCR !  ELIST           1 0 AT .STATUS ‘»≈Œ R#>AT CURON DROP ;                                           ∆ORTH DEFINITIONS                                                                 : (LOAD  ( BLK POS --)                    >IN PUSH  >IN !  ?DUP 0= ?EXIT           BLK PUSH  BLK !  .STATUS INTERPRET ;                                             : SHOWLOAD  ( BLK POS -)                  SCR PUSH  SCR OFF  R# PUSH               ['] SHOW 'NAME ! (LOAD SHOWOFF ;                                                 ≈DITOR DEFINITIONS                                                                                                                                                 \ ≈DI EDIT                    CLV01AUG87 ‹ : SETCOL ( 0 / 4 / 8 --)                INK-POT +                                DUP C@ BORDER C! DUP 1+ C@ BKGRND C!      2+ C@ PEN C! ;                         ‹ : (EDIT  ( -- N)                        4 SETCOL $93 CON!                        ELIST DROP  SCROLL OFF                   ¬≈«…Œ KEY DUP CHAR C!                      0 FINDKEY EXECUTE ?BLINK ?DUP ’Œ‘…Ã    0 0 AT KILLINE DROP  SCROLL ON           0 SETCOL (16 0 $7EA C! √) \ ¡PPEND-ÕODE ;                                        ∆ORTH DEFINITIONS                        : EDIT ( SCR# -) (16 C64FKEYS √)          SCR !  STAMP?  INITPTR  (EDIT            $18 0 AT  DRV”CR ." ”CR " . ." ƒRV " .   DUP 2 AND 0=  …∆ ." NOT "     ‘»≈Œ                        ." CHANGED"             DUP 4 AND     …∆ SAVE-BUFFERS ‘»≈Œ       DUP 6 AND 6 = …∆ ." , SAVED"  ‘»≈Œ           8 AND     …∆ ." , LOADING" CR              SCR @  R# @  SHOWLOAD   ‘»≈Œ ;                                                                                     \ ≈DITOR ∆ORTH83             CLV2:JULL87                                          : L  ( SCR -)   R# OFF  EDIT ;           : R  ( -)       SCR @ EDIT ;             : +L ( N -)     SCR @ + L ;                                                       : V  ( -) ( TEXT)                         '  >NAME  ?DUP …∆  4 - @  ‘»≈Œ  ;                                                : VIEW  ( -) ( TEXT)                      V ?DUP                                   …∆  L  ≈Ã”≈  ." FROM KEYBOARD"  ‘»≈Œ ;                                           ≈DITOR DEFINITIONS                                                                (16 ‹ : CURADDR \ --¡DDR                      LINPTR @ CUROFS C@ + ; √)                                                    : CURLIN  ( --CUR¡DDR LINÃEN) \ & ≈œÃN   (64 LINPTR @ $ƒ5 C@ -TRAILING                 DUP $D3 C! √)                       (16 $1B CON! ASCII J CON! CURADDR            $1B CON! ASCII K CON! $1D CON!            CURADDR  OVER - √) ;                                                        \ ≈DIDECODE                  CCAS16AUG06                                          : EDIDECODE  ( ADR CNT1 KEY -- ADR CNT2)  $8ƒ CASE? …∆  IMODE OFF CR EXIT  ‘»≈Œ    #CR CASE? …∆  IMODE OFF                 CURLIN DUP SPAN @ U> …∆ DROP SPAN @ ‘»≈Œ   BOUNDS ?ƒœ                               2DUP +  … C@ SCR>CBM  SWAP C!  1+ Ãœœ–   DUP SPAN !  EXIT  ‘»≈Œ                  DUP CHAR C!                              $12 FINDKEY EXECUTE ?BLINK DROP ;                                                                                         : EDIEXPECT ( ADDR LEN1 -- )              INITPTR  SPAN !                          0 ¬≈«…Œ  DUP SPAN @  U<                    ◊»…Ã≈  KEY DECODE  “≈–≈¡‘              2DROP SPACE ;                                                                    …NPUT: EDIBOARD                           C64KEY C64KEY? EDIDECODE EDIEXPECT ;                                             EDIBOARD                                                                                                                  \ .STATUS                     CAS16AUG06                                          ' NOOP …S .STATUS                                                                 : .BLK  ( -)                              BLK @ ?DUP …∆  ."  ¬LK " U. ?CR  ‘»≈Œ ;                                          ' .BLK …S .STATUS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \ TRACER: LOADSCREEN          CAS16AUG06                                          œNLYFORTH                                                                         \NEEDS √ODE -$2¬ +LOAD \ ‘RANS ¡SSEMBLER                                          \NEEDS ‘OOLS   ÷OCABULARY ‘OOLS                                                   ‘OOLS ALSO DEFINITIONS                                                               1 6  +THRU  \ ‘RACER                     7 8  +THRU  \ ‘OOLS FOR DECOMPILING                                            œNLYFORTH                                                                         \\                                                                                ‘HIS NICE ∆ORTH ‘RACER HAS BEEN          DEVELOPED BY ¬. –ENNEMANN AND CO         FOR ¡TARI ”‘. √Ã ÷OGT HAS PORTED IT      BACK TO THE VOLKS∆ORTH 6502 √-16 AND     √-64                                                                                                                                                               \ TRACER: WCMP VARIABLES      CLV04AUG87                                          ¡SSEMBLER ALSO DEFINITIONS                                                        : WCMP ( ADR1 ADR2--) \ ¡SSEMBLER-ÕACRO   OVER LDA DUP CMP SWAP  \ COMPARES WORD   1+   LDA 1+  SBC ;                                                                                                        œNLY ∆ORTH ALSO ‘OOLS ALSO DEFINITIONS                                            ‹ ÷ARIABLE (◊                            ‹ ÷ARIABLE <IP      ‹ ÷ARIABLE IP>       ‹ ÷ARIABLE NEST?    ‹ ÷ARIABLE TRAP?     ‹ ÷ARIABLE LAST'    ‹ ÷ARIABLE #SPACES                                                                                                                                                                                                                                                                                                                                                                                                                            \ TRACER:CPUSH ONELINE        CAS16AUG06                                          ‹ √REATE CPULL    0  ]                    RP@ COUNT 2DUP + RP! R> SWAP CMOVE ;                                             : CPUSH  ( ADDR LEN -)                    R> -ROT   OVER  >R                       RP@ OVER 1+ - DUP RP!  PLACE             CPULL >R  >R ;                                                                   ‹ : ONELINE  &82 ALLOT KEYBOARD DISPLAY   .STATUS  SPACE  QUERY  INTERPRET         -&82 ALLOT  RDROP                        ( DELETE QUIT FROM TNEXT )  ;                                                    : RANGE ( ADR--) \ GETS <IP IP>           IP> OFF  DUP <IP !                       ¬≈«…Œ 1+ DUP @                             [ ∆ORTH ] ['] UNNEST = ’Œ‘…Ã           3+ IP> ! ;                                                                                                                                                                                                                                          \ TRACER:STEP TNEXT           CLV04AUG87                                          ‹ √ODE STEP                               $FF # LDA TRAP? STA TRAP? 1+ STA                   “– ÿ) LDA  …– STA              “– )Ÿ LDA  …– 1+ STA  “– 2INC            (◊ LDA  ◊ STA   (◊ 1+ LDA   ◊ 1+ STA    ÃABEL ◊1-  ◊ 1- JMP  END-CODE                                                     ‹ √REATE: NEXTSTEP STEP ;                                                         ÃABEL  TNEXT …– 2INC                      TRAP? LDA  ◊1- BEQ                       NEST? LDA 0=  \ LOW(!)¬YTE TEST          ?[ …– <IP WCMP ◊1- BCC                      …– IP> WCMP ◊1- BCS                   ][ NEST? STX  \ LOW(!)¬YTE CLEAR         ]?                                        TRAP? DUP STX 1+ STX \ DISABLE TRACER    ◊ LDA  (◊ STA    ◊ 1+ LDA   (◊ 1+ STA                                                                                                                                                                                                              \ TRACER:..TNEXT              CLV12OCT87                                           ;C: NEST? @                              …∆ NEST? OFF R> IP> PUSH <IP PUSH           DUP 2- RANGE                             #SPACES PUSH 1 #SPACES +! >R ‘»≈Œ     R@  NEXTSTEP >R                          INPUT PUSH    OUTPUT PUSH                2- DUP LAST' !                           CR #SPACES @ SPACES                      DUP 4 U.R @ DUP 5 U.R SPACE              >NAME .NAME  $10 COL - 0 MAX SPACES .S   STATE PUSH  BLK PUSH  >IN PUSH           [ ' 'QUIT      >BODY ] ÃITERAL  PUSH     [ ' >INTERPRET >BODY ] ÃITERAL  PUSH     #TIB PUSH  TIB #TIB @ CPUSH  R0 PUSH     RP@ R0 !                                 ['] ONELINE …S 'QUIT  QUIT ;                                                                                                                                                                                                                                                                                                          \ TRACER:DO-TRACE TRACEABLE   CAS16AUG06                                          ‹ √ODE DO-TRACE \ INSTALLS ‘Œ≈ÿ‘          TNEXT 0 $100 M/MOD                           # LDA  ŒEXT $C + STA                     # LDA  ŒEXT $B + STA                 $4√ # LDA  ŒEXT $A + STA  ŒEXT JMP      END-CODE                                                                          ‹ : TRACEABLE ( CFA--<…– ) RECURSIVE      DUP @                                    ['] :    @ CASE? …∆ >BODY     EXIT ‘»≈Œ  ['] KEY  @ CASE? …∆ >BODY C@ …NPUT  @ +                    @ TRACEABLE EXIT ‘»≈Œ  ['] TYPE @ CASE? …∆ >BODY C@ œUTPUT @ +                    @ TRACEABLE EXIT ‘»≈Œ  ['] R/W  @ CASE? …∆ >BODY                                  @ TRACEABLE EXIT ‘»≈Œ  @  [ ' ∆ORTH @ @ ] ÃITERAL =                              …∆ @ 3 + EXIT ‘»≈Œ      \ FOR DEFINING WORDS WITH ƒœ≈”>          >NAME .NAME ." CAN'T BE ƒ≈¬’«GED"        QUIT ;                                                                                                                   \ TRACER:’SER-◊ORDS           CAS16AUG06                                          : NEST   \ TRACE INTO CURRENT WORD        LAST' @ @ TRACEABLE DROP NEST? ON ;                                              : UNNEST \ PROCEEDS AT CALLING WORD       <IP ON IP> OFF ; \ CLEARS TRAP RANGE                                             : ENDLOOP LAST' @ 4 + <IP ! ;            \ NO TRACE OF NEXT WORD TO SKIP Ãœœ–..                                            ' END-TRACE ¡LIAS UNBUG \ CONT. EXECUT.                                           : (DEBUG  ( CFA-- )                       TRACEABLE RANGE                          NEST? OFF TRAP? ON #SPACES OFF           ‘OOLS DO-TRACE ;                                                                 ∆ORTH DEFINITIONS                                                                 : DEBUG  ' (DEBUG ; \ WORD FOLLOWS                                                : TRACE'            \ WORD FOLLOWS        ' DUP (DEBUG EXECUTE END-TRACE ;                                                \ TOOLS FOR DECOMPILING,      CLV12OCT87                                          ( INTERACTIVE USE                      )                                          œNLYFORTH ‘OOLS ALSO DEFINITIONS                                                  ‹ : ?:  ?CR DUP 4 U.R ." :"  ;           ‹ : @?  DUP @ 6 U.R ;                    ‹ : C?  DUP C@ 3 .R ;                    ‹ : BL  $24 COL - 0 MAX SPACES ;                                                  : S  ( ADR - ADR+)                        ( PRINT LITERAL STRING)                  ?:  SPACE C? 4 SPACES DUP COUNT TYPE     DUP C@ + 1+ BL  ;  ( COUNT + RE)                                                 : N  ( ADR - ADR+2)                       ( PRINT NAME OF NEXT WORD BY ITS CFA)    ?: @? 2 SPACES                           DUP @ >NAME .NAME 2+ BL ;                                                        : K  ( ADR - ADR+2)                       ( PRINT LITERAL VALUE)                   ?: @? 2+ BL ;                                                                   ( TOOLS FOR DECOMPILING, INTERACTIVE   )                                          : D  ( ADR N - ADR+N) ( DUMP N BYTES)     2DUP SWAP ?: 3 SPACES  SWAP 0            ƒœ  C? 1+ Ãœœ–                           4 SPACES -ROT TYPE BL ;                                                          : C  ( ADR - ADR+1)                       ( PRINT BYTE AS UNSIGNED VALUE)          1 D ;                                                                            : B  ( ADR - ADR+2)                       ( PRINT BRANCH TARGET LOCATION )         ?: @? DUP @  OVER + 6 U.R 2+ BL  ;                                               ( USED FOR : )                           ( ŒAME ”TRING ÃITERAL ƒUMP √LIT ¬RANCH ) ( -    -      -       -    -    -      )                                                                                                                                                                                                                                                                                               ( DEBUGGING UTILITIES      BP 19 02 85 )                                                                                   : UNRAVEL   \  UNRAVEL PERFORM (ABORT"    RDROP RDROP RDROP                        CR ." TRACE DUMP IS "  CR                ¬≈«…Œ  RP@   R0 @ -                      ◊»…Ã≈   R>  DUP  8 U.R  SPACE                    2- @  >NAME .NAME  CR            “≈–≈¡‘ (ERROR ;                                                                  ' UNRAVEL ERRORHANDLER !                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \ ÕULTITASKER               ¬– 13.9.84 )                                          œNLYFORTH                                                                         \NEEDS MULTITASK  1 +LOAD  SAVE                                                     2  4 +THRU        \ ‘ASKER             \    5 +LOAD        \ ƒEMOTASK                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   \ ÕULTITASKER               ¬– 13.9.84 )                                          \NEEDS √ODE -$36 +LOAD  \ TRANSIENT ¡SS                                           √ODE STOP                                 ”– 2DEC  …–    LDA  ”– ÿ) STA                     …– 1+ LDA  ”– )Ÿ STA            ”– 2DEC  “–    LDA  ”– ÿ) STA                     “– 1+ LDA  ”– )Ÿ STA            6 # LDY  ”–    LDA  ’– )Ÿ STA                INY  ”– 1+ LDA  ’– )Ÿ STA            1 # LDY  TYA  CLC  ’– ADC  ◊ STA         TXA  ’– 1+ ADC  ◊ 1+ STA                 ◊ 1- JMP   END-CODE                                                              ‹ √REATE TASKPAUSE   ¡SSEMBLER            $2√ # LDA  ’– ÿ) STA  ' STOP @ JMP      END-CODE                                                                          : SINGLETASK                              [ ' PAUSE @ ] ÃITERAL  ['] PAUSE ! ;                                             : MULTITASK   TASKPAUSE ['] PAUSE ! ;                                                                                     \ PASS  ACTIVATE           KS 8 MAY 84 )                                          : PASS  ( N0 .. NR-1 ‘ADR R -- )          ¬≈«…Œ  [ ROT ( ‘RICK ! ) ]                SWAP  $2√ OVER C! \ AWAKE ‘ASK           R> -ROT           \ …– R ADDR            8 + >R            \ S0 OF ‘ASK           R@ 2+ @  SWAP     \ …– R0 R              2+ 2*             \ BYTES ON ‘ASKSTACK                     \ INCL. R0 & …–        R@ @ OVER -       \ NEW ”–               DUP R> 2- !       \ INTO SSAVE           SWAP BOUNDS  ?ƒœ  … !  2 +Ãœœ–  ;      RESTRICT                                                                          : ACTIVATE ( ‘ADR --)                     0 [ -ROT ( ‘RICK ! ) ]  “≈–≈¡‘ ;        -2 ALLOT  RESTRICT                                                                : SLEEP  ( ‘ADR --)                       $4√ SWAP C! ;       \  Õ–-œPCODE                                                 : WAKE  ( ‘ADR --)                        $2√ SWAP C! ;       \ ¬…‘-œPCODE                                                \ BUILDING A ‘ASK           ¬– 13.9.84 )                                          ‹ : TASKERROR  ( STRING -)                STANDARDI/O  SINGLETASK                  ." ‘ASK ERROR : " COUNT TYPE             MULTITASK STOP ;                                                                 : ‘ASK ( RLEN  SLEN -- )                  ALLOT              \ ”TACK               HERE $∆∆ AND $∆≈ =                       …∆ 1 ALLOT ‘»≈Œ     \ 6502-ALIGN         UP@ HERE $100 CMOVE \ INIT USER AREA     HERE  $4√ C,       \  Õ– OPCODE                             \     TO SLEEP ‘ASK   UP@ 1+ @ ,                               DUP  UP@ 1+ !      \ LINK ‘ASK           3 ALLOT            \ ALLOT  ”“ WAKE      DUP  6 -  DUP , ,  \ SSAVE AND S0        2DUP +  ,          \ HERE + RLEN = R0    UNDER  + HERE - 2+ ALLOT                 ['] TASKERROR  OVER                      [ ' ERRORHANDLER >BODY C@ ] ÃITERAL + !  √ONSTANT ;                                                                                                               \ MORE ‘ASKS           KS/BP  26APR85RE)                                          : RENDEZVOUS  ( SEMAPHORADR -)            DUP UNLOCK PAUSE LOCK ;                                                          ‹ : STATESMART                            STATE @ …∆ [COMPILE] ÃITERAL ‘»≈Œ ;                                              : 'S  ( ‘ADR - ADR.OF.TASKUSERVAR)        ' >BODY C@ + STATESMART ; IMMEDIATE                                              \ ”YNTAX:   2  ƒEMOTASK 'S BASE  !       \ MAKES ƒEMOTASK WORKING BINARY                                                   : TASKS  ( -)                             ." Õ¡…Œ " CR UP@ DUP 1+ @                ¬≈«…Œ  2DUP - ◊»…Ã≈                       DUP [ ' R0 >BODY C@ ] ÃITERAL + @        6 + NAME> >NAME .NAME                    DUP C@ $4√ = …∆ ." SLEEPING" ‘»≈Œ CR    1+ @ “≈–≈¡‘  2DROP ;                                                                                                                                                                                       \ ‘ASKDEMO                    CLV12AUG87                                          : TASKMARK ; \NEEDS CBM>SCR : CBM>SCR ;                                           : SCRSTART  ( -- ADR)                      (64 $288 √) (16 $53E √) C@ $100 * ;                                             ÷ARIABLE COUNTER  COUNTER OFF                                                     $100 $100 ‘ASK ¬ACKGROUND                                                         : >COUNT  ( N -)                          ¬ACKGROUND 1 PASS                        COUNTER !                                ¬≈«…Œ  COUNTER @  -1 COUNTER +! ?DUP     ◊»…Ã≈  PAUSE 0 <# #S #>                   0 ƒœ  PAUSE  DUP … + C@  CBM>SCR               SCRSTART … +  C!  Ãœœ–  DROP      “≈–≈¡‘                                   ¬≈«…Œ STOP “≈–≈¡‘ ; \ STOP'S FOREVER    : WAIT  ¬ACKGROUND SLEEP ;               : GO    ¬ACKGROUND WAKE ;                                                         MULTITASK       $100 >COUNT  PAGE                                                \ PRINTER LOADSCREEN          27JUL85RE)                                          œNLYFORTH HEX                                                                     ÷OCABULARY –RINT                         –RINT DEFINITIONS ALSO                                                            √REATE –RTER 2 ALLOT  ( ”EMAPHOR)        –RTER OFF                                                                           : ) ; IMMEDIATE                          : (U ; IMMEDIATE  \ FOR USER-PORT        : (S  [COMPILE] ( ; IMMEDIATE          \ : (S ; IMMEDIATE  \ FOR SERIAL BUS     \ : (U  [COMPILE] ( ; IMMEDIATE                                                   (S  1 +LOAD )                                                                      2 $¡ +THRU                                                                       œNLYFORTH                                                                         CLEAR                                                                                                                     \ ¬UFFER FOR THE UGLY ”ER¬US  28JUL85RE)                                          $100 ‹ √ONSTANT BUFLEN                                                            ‹ ÷ARIABLE –RBUF  BUFLEN ALLOT –RBUF OFF                                          ‹ : >BUF  ( CHAR --)                      –RBUF COUNT + C!  1 –RBUF +! ;                                                   ‹ : FULL?  ( -- F)   –RBUF C@ BUFLEN = ;                                          ‹ : .BUF  ( --)                           –RBUF COUNT -TRAILING                    4 0 BUSOUT BUSTYPE BUSOFF –RBUF OFF ;                                            : P!  ( CHAR --)                          PAUSE  >R                                R@ $√ ( ∆ORMFEED  ) =                    …∆  R> >BUF .BUF EXIT  ‘»≈Œ              R@ $¡ ( ÃINEFEED  ) =                    R@ $ƒ ( √AR“ETURN ) = OR  FULL? OR       …∆  .BUF  ‘»≈Œ  R> >BUF ;                                                                                                                                         \ P! CTRL: ≈”√ ESC:           28JUL85RE)                                          (U                                       : P!  \ CHAR --                           $ƒƒ01 C!  $ƒƒ00 DUP C@ 2DUP              4 OR SWAP C!  $∆¬ AND SWAP C!             ¬≈«…Œ  PAUSE  $ƒƒ0ƒ C@ $10 AND           ’Œ‘…Ã ;  )                                                                      ‹ : CTRL:  ( 8B --)   √REATE C,            DOES>  ( --)   C@ P! ;                                                             7 CTRL: ¬≈Ã    ‹ $7∆ CTRL: ƒ≈Ã        ‹ $D CTRL: √“≈‘   ‹ $1¬ CTRL: ≈”√          $A CTRL: Ã∆       $0√ CTRL: ∆∆                                                  ‹ : ESC:   ( 8B --)   √REATE C,            DOES>  ( --)   ≈”√ C@ P! ;                                                       $30 ESC: 1/8"       $31 ESC: 1/10"       $32 ESC: 1/6"                            $54 ESC: SUOFF                           $4≈ ESC: +JUMP      $4∆ ESC: -JUMP                                                                                       \ PRINTER CONTROLS            28JUL85RE)                                          ‹ : ≈”√2   ≈”√  P! P! ;                                                             : GORLITZ  ( 8B --)   ¬Ã ≈”√2 ;                                                 ‹ : ≈”√"!"  ( 8B --)   $21 ≈”√2 ;                                                 ‹ ÷ARIABLE ÕODUS  ÕODUS OFF                                                       ‹ : ON:  ( 8B --)  √REATE C,               DOES>  ( --)                             C@ ÕODUS C@ OR DUP ÕODUS C! ≈”√"!" ;                                            ‹ : OFF:  ( 8B --)   √REATE $∆∆ XOR C,     DOES>  ( --)                             C@ ÕODUS C@ AND DUP ÕODUS C! ≈”√"!" ;                                            $10 ON: +DARK    $10 OFF: -DARK          $20 ON: +WIDE    $20 OFF: -WIDE          $40 ON: +CURSIV  $40 OFF: -CURSIV        $80 ON: +UNDER   $80 OFF: -UNDER        ‹  1 ON: (12CPI                          ‹  4 ON: (17CPI     5 OFF: 10CPI                                                 \ PRINTER CONTROLS            28JUL85RE)                                          : 12CPI   10CPI (12CPI ;                 : 17CPI   10CPI (17CPI ;                 : SUPER   0 $53 ≈”√2 ;                   : SUB     1 $53 ≈”√2 ;                   : LINES  ( #LINES --)  $43 ≈”√2 ;        : "LONG  ( INCHES --)   0 LINES P! ;     : AMERICAN   0 $52 ≈”√2 ;                : GERMAN     2 $52 ≈”√2 ;                                                         : PRINIT                                 (S  ¡SCII X GORLITZ  ¡SCII B GORLITZ         ¡SCII E GORLITZ  ¡SCII T GORLITZ         ¡SCII Z GORLITZ  ¡SCII L GORLITZ )   (U  $∆∆ $ƒƒ03 C!                             $ƒƒ02 DUP C@  4 OR SWAP C! ) ;                                                ‹ ÷ARIABLE >ASCII  >ASCII ON                                                      : NORMAL   >ASCII ON                       ÕODUS OFF  10CPI  AMERICAN  SUOFF        1/6"  $C "LONG  √“≈‘ ;                                                                                                  \ ≈PSON PRINTER INTERFACE     08SEP85RE)                                          ‹ : C>A  ( 8B0 -- 8B1)                    >ASCII @ …∆                             DUP $41 $5¬ UWITHIN …∆ $20 OR  EXIT ‘»≈Œ DUP $√1 $ƒ¬ UWITHIN …∆ $7∆ AND EXIT ‘»≈Œ DUP $ƒ√ $≈0 UWITHIN …∆ $¡0 XOR ‘»≈Œ       ‘»≈Œ ;                                                                           ‹ ÷ARIABLE PCOL  PCOL OFF                ‹ ÷ARIABLE PROW  PROW OFF                                                         ‹ : PEMIT  C>A P!  1 PCOL +! ;           ‹ : PCR   √“≈‘ Ã∆  1 PROW +!  0 PCOL ! ; ‹ : PDEL   ƒ≈Ã  -1 PCOL +! ;             ‹ : PPAGE  ∆∆  0 PROW !  0 PCOL ! ;      ‹ : PAT    ( ZEILE SPALTE -- )             OVER   PROW @ < …∆  PPAGE  ‘»≈Œ          SWAP PROW @ - 0 ?ƒœ PCR Ãœœ–             DUP  PCOL < …∆  √“≈‘  PCOL OFF  ‘»≈Œ     PCOL @ - SPACES ;                      ‹ : PAT?   PROW @  PCOL @ ;              ‹ : PTYPE  ( ADR COUNT --)  DUP PCOL +!   BOUNDS ?ƒœ  … C@ C>A P!  Ãœœ– ;                                                 \ PRINT  PL                    02OCT87RE                                          ‹ œUTPUT: >PRINTER                        PEMIT PCR PTYPE PDEL PPAGE PAT PAT? ;                                                                                     : BEMIT   DUP  C64EMIT  PEMIT ;          : BCR          C64CR    PCR   ;          : BTYPE   2DUP C64TYPE  PTYPE ;          : BDEL         C64DEL   PDEL  ;          : BPAGE        C64PAGE  PPAGE ;          : BAT     2DUP C64AT    PAT   ;                                                   ‹ œUTPUT: >BOTH                           BEMIT BCR BTYPE BDEL BPAGE BAT PAT? ;                                            ∆ORTH DEFINITIONS                                                                 : –RINTER                                  NORMAL  (U PRINIT )  >PRINTER ;        : ¬OTH                                     NORMAL  >BOTH ;                                                                                                                                                  \ 2SCR'S NSCR'S THRU      KS  28JUL85RE)                                          ∆ORTH DEFINITIONS                                                                 ‹ : 2SCR'S  ( BLK1 BLK2 --)               CR Ã∆  17CPI  +WIDE +DARK $15 SPACES     OVER 3 .R $13 SPACES DUP 3 .R            -DARK -WIDE CR  B/BLK 0 ƒœ                CR … C/L / $15 .R  4 SPACES              OVER BLOCK … +  √/Ã 1- TYPE  5 SPACES    DUP  BLOCK … +  √/Ã 1- -TRAILING TYPE   √/Ã +Ãœœ–  2DROP  CR ;                                                           ‹ : NSCR'S  ( BLK1 N -- BLK2)   2DUP      BOUNDS ƒœ …  OVER … + 2SCR'S Ãœœ– + ;                                            : PTHRU  ( FROM TO --)                    –RTER LOCK  œUTPUT PUSH –RINTER  1/8"    1+ OVER - 1+ -2 AND 6 /MOD               ?DUP …∆ SWAP >R                          0 ƒœ 3 NSCR'S 2+ 1+ PAGE Ãœœ–  R> ‘»≈Œ   ?DUP …∆ 1+ 2/ NSCR'S PAGE ‘»≈Œ DROP      –RTER UNLOCK ;                                                                                                           \ –RINTING WITH SHADOWS       28JUL85RE)                                          ∆ORTH DEFINITIONS                                                                 ‹ : 2SCR'S  ( BLK1 BLK2 --)               CR Ã∆  17CPI  +WIDE +DARK $15 SPACES     DUP  3 .R                                -DARK -WIDE CR  B/BLK 0 ƒœ                CR … C/L / $15 .R  4 SPACES              DUP  BLOCK … +  √/Ã 1- TYPE  5 SPACES    OVER BLOCK … +  √/Ã 1- -TRAILING TYPE   √/Ã +Ãœœ–  2DROP  CR ;                                                           ‹ : NSCR'S  ( BLK1 N -- BLK2)             0 ƒœ DUP [ ≈DITOR ]  SHADOW @   2DUP     U> …∆ NEGATE ‘»≈Œ                        + OVER 2SCR'S 1+ Ãœœ– ;                                                          : DOKUMENT  ( FROM TO --)                 –RTER LOCK  œUTPUT PUSH  –RINTER         1/8"  1+ OVER - 3 /MOD                   ?DUP …∆ SWAP >R                          0 ƒœ 3 NSCR'S PAGE Ãœœ–  R> ‘»≈Œ         ?DUP …∆ NSCR'S PAGE ‘»≈Œ DROP            –RTER UNLOCK ;                         \ 2SCR'S NSCR'S THRU      KS  28JUL85RE)                                          ∆ORTH DEFINITIONS  $40 ‹ √ONSTANT √/Ã                                             ‹ : 2SCR'S  ( BLK1 BLK2 --)               PCR Ã∆ Ã∆ 10CPI +DARK  $12 SPACES        OVER 3 .R  $20 SPACES DUP 3 .R           CR 17CPI -DARK                           $10 √/Ã * 0 ƒœ CR OVER BLOCK … + √/Ã     6 SPACES TYPE 2 SPACES                   DUP BLOCK … + √/Ã -TRAILING TYPE         √/Ã  +Ãœœ–  2DROP CR ;                                                           ‹ : NSCR'S ( BLK1 N -- BLK2)   UNDER 0    ƒœ 2DUP DUP ROT + 2SCR'S 1+ Ãœœ– NIP ;                                           : 64PTHRU  ( FROM TO --)                  –RTER LOCK  >ASCII PUSH  >ASCII OFF      œUTPUT PUSH  –RINTER                     1/6" 1+ OVER - 1+ -2  AND 6 /MOD         ?DUP …∆ SWAP >R                          0 ƒœ 3 NSCR'S 2+ 1+ PAGE Ãœœ–  R> ‘»≈Œ   ?DUP …∆ 1+ 2/ NSCR'S PAGE ‘»≈Œ DROP      –RTER UNLOCK  ;                                                                 \ PFINDEX                      02OCT87RE                                          œNLYFORTH –RINT ALSO                                                              : PFINDEX  ( FROM TO --)                  –RTER LOCK  –RINTER  &12 "LONG           +JUMP  FINDEX  CR PAGE  -JUMP            –RTER UNLOCK  DISPLAY  ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \ –RINTSPOOL                   02OCT87RE                                          \NEEDS TASKS  .( ‘ASKER?!) \\                                                     $100 $100 ‘ASK –RINTSPOOL                                                         : SPOOL  ( FROM TO --)                    –RINTSPOOL 2 PASS                                                                 PTHRU                                    STOP ;                                                                           : ENDSPOOL  ( --)                         –RINTSPOOL ACTIVATE                      STOP ;                                                                                                                                                                                                                                                                                                                                                                                                                                                           \ –RINTER “OUTINE √1526       CAS16AUG06                                          ( NOT USEABLE FOR –RINTSPOOL!!   RE)                                              œNLYFORTH  ÷OCABULARY –RINT                                                       –RINT ALSO ƒEFINITIONS                                                            : PRINIT   4 7 BUSOUT ;                  \NEEDS ∆∆  : ∆∆ NOOP ;                   : √“≈‘     $D BUS! ;                                                              : PSPACES  ( N -)                          0 ?ƒœ  ¬Ã BUS! Ãœœ– ;                                                           1 2 +THRU                                                                         œNLY ∆ORTH ALSO ƒEFINITIONS                                                       ( SAVE )                                                                                                                                                                                                                                             \ –RINTER INTERFACE 1526       02OCT87RE                                          ÷ARIABLE –COL   ÷ARIABLE –ROW                                                     ‹ : PEMIT  BUS!    1 –COL +! ;           ‹ : PCR    √“≈‘    1 –ROW +!  0 –COL ! ; ‹ : PDEL   ;                             ‹ : PPAGE  ∆∆  0 –ROW !  0 –COL ! ;      ‹ : PAT    ( ZEILE SPALTE -- )             OVER   –ROW @ < …∆  PPAGE  ‘»≈Œ          0 ROT  –ROW @ - BOUNDS ?ƒœ PCR Ãœœ–      DUP  –COL @ - PSPACES  –COL ! ;        ‹ : PAT?   –ROW @  –COL @ ;              ‹ : PTYPE  ( ADR COUNT -)  DUP –COL +!    BOUNDS ?ƒœ  … C@ BUS! Ãœœ– ;                                                     ‹ œUTPUT: >PRINTER                        PEMIT PCR PTYPE PDEL PPAGE PAT PAT? ;                                            ∆ORTH DEFINITIONS                                                                 : PRINTER   PRINIT >PRINTER ;                                                     : DISPLAY   CR BUSOFF DISPLAY ;                                                  \ PRINTER ROUTINEN             20OCT87RE                                          œNLY ∆ORTH ALSO DEFINITIONS                                                       4 √ONSTANT ¬/SCR                                                                  : .LINE  ( LINE# SCR# --)                  BLOCK SWAP C/L * + C/L 1- TYPE ;                                                : .===                                    C/L 1- 0 ƒœ  ¡SCII = EMIT  Ãœœ– ;                                                : PRLIST ( SCR# --)                       DUP BLOCK DROP    PRINTER                $≈ EMIT ." ”CREEN ŒR. " DUP . $14 EMIT   CR .===                                  L/S 0 ƒœ … OVER .LINE CR Ãœœ– DROP       .=== CR CR CR  DISPLAY ;                                                                                                                                                                                                                                                                                                              \ √–-80 –RINTER LOADSCREEN    CLV14OCT87                                          œNLYFORTH HEX                                                                     ÷OCABULARY –RINT  –RINT DEFINITIONS ALSO                                          √REATE –RTER 2 ALLOT  ( ”EMAPHOR)                                                 0 –RTER !   \ –RTER UNLOCK /CLV                                                   1 6 +THRU                                                                         œNLY ∆ORTH ALSO DEFINITIONS                                                       (  CLEAR   )                                                                                                                                                                                                                                                                                                                                                                                                                                                      \ P! CTRL: ≈”√ ESC:         07MAY85MAWE)                                          –RINT DEFINITIONS                                                                 : P!  ( 8B -)                             ¬≈«…Œ  PAUSE  $ƒƒ0ƒ C@  $10 AND  ’Œ‘…Ã   $ƒƒ01 C! ;                                                                       ‹ : CTRL:  ( ¬ -)   √REATE C,              DOES>  ( -)   C@ P! ;                                                              07 CTRL: ¬≈Ã    ‹ $7∆ CTRL: ƒ≈Ã       ‹ $0ƒ CTRL: √“≈‘   ‹ $1¬ CTRL: ≈”√         $0¡ CTRL: Ã∆       $0√ CTRL: ∆∆                                                 ‹ : ESC:   ( ¬ -)   √REATE C,              DOES>  ( -)   ≈”√ C@ P! ;                                                        $30 ESC: 1/8"       $31 ESC: 1/10"       $32 ESC: 1/6"       $20 ESC: GORLITZ                                             ‹ : ≈”√2   ≈”√  P! P! ;                                                                                                                                            ( PRINTER CONTROLS          07MAY85MAWE)                                           $0E ESC: +WIDE  $14 ESC: -WIDE           $45 ESC: +DARK  $46 ESC: -DARK           $47 ESC: +DUB   $48 ESC: -DUB            $0F ESC: +COMP  $12 ESC: -COMP                                                   : +UNDER 1 $2ƒ ESC2 ;                    : -UNDER 0 $2ƒ ESC2 ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ( PRINTER CONTROLS          07MAY85MAWE)                                            $54 ESC: SUOFF                                                                  : SUPER   0 $53 ≈”√2 ;                                                            : SUB     1 $53 ≈”√2 ;                                                            : LINES  ( LINES -)   $43 ≈”√2 ;                                                  : "LONG  ( INCHES -)   0 LINES P! ;                                               : AMERICAN   0 $52 ≈”√2 ;                                                         : GERMAN     2 $52 ≈”√2 ;                                                         : PSPACES  ( N -)                          0 SWAP BOUNDS ?ƒœ  ¬Ã P!  Ãœœ– ;                                                ‹ : INITPORT  0 $ƒƒ01 C! $∆∆ $ƒƒ03 C! ;                                           : PRINIT   INITPORT                        AMERICAN  SUOFF  1/6"                    &12 "LONG  √“≈‘ ;                                                              ( √–80  PRINTER INTERFACE     26MAR85RE)                                          ‹ ÷ARIABLE UNCHANGED?  UNCHANGED? OFF                                             ‹ : C>A  ( 8B0 - 8B1)                     UNCHANGED? @ ?EXIT                       DUP $41 $5¬ UWITHIN                                     …∆  $20 OR  EXIT ‘»≈Œ     DUP $√1 $ƒ¬ UWITHIN                                     …∆  $7∆ AND EXIT ‘»≈Œ     DUP $ƒ√ $≈0 UWITHIN                                     …∆  $¡0 XOR      ‘»≈Œ ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ( PRINT  PL                   06MAY85WE)                                          ÷ARIABLE –COL   ÷ARIABLE –ROW                                                     ‹ : PEMIT  C>A P!  1 –COL +! ;           ‹ : PCR    √“≈‘    1 –ROW +!  0 –COL ! ; ‹ : PDEL   ƒ≈Ã  -1 –COL +! ;             ‹ : PPAGE  ∆∆  0 –ROW !  0 –COL ! ;      ‹ : PAT    ( ZEILE SPALTE -- )             OVER   –ROW @ < …∆  PPAGE  ‘»≈Œ          0 ROT  –ROW @ - BOUNDS ?ƒœ PCR Ãœœ–      DUP  –COL @ - PSPACES  –COL ! ;        ‹ : PAT?   –ROW @  –COL @ ;              ‹ : PTYPE  ( ADR COUNT -)  DUP –COL +!    BOUNDS ?ƒœ  … C@ C>A P!  Ãœœ– ;                                                  ‹ œUTPUT: >PRINTER                        PEMIT PCR PTYPE PDEL PPAGE PAT PAT? ;                                            ∆ORTH DEFINITIONS                                                                 : –RINTER   PRINIT  >PRINTER ;                                                                                                                                     ( 3SCR'S NSCR'S THRU      KS07MAY85MAWE) ∆ORTH DEFINITIONS                                                                 ‹ : 3SCR'S  ( BLK  -)                     CR  -COMP +DARK                           $¬ SPACES DUP    3 .R                   $19 SPACES DUP 1+ 3 .R                   $19 SPACES DUP 2+ 3 .R                   CR  +COMP  -DARK  Ã/” √/Ã *  0 ƒœ         CR 5 SPACES DUP  BLOCK … + √/Ã 1- TYPE    8 SPACES DUP 1+ BLOCK … + √/Ã 1- TYPE    8 SPACES DUP 2+ BLOCK … + √/Ã 1- TYPE  √/Ã +Ãœœ–  DROP  CR Ã∆ ;                                                         ‹ : NSCR'S ( BLK1 N - BLK2)  UNDER 0      ƒœ DUP 3SCR'S OVER + Ãœœ– NIP ;                                                  : PTHRU  ( FROM TO -)                     œUTPUT @ -ROT  –RINTER –RTER LOCK 1/8"   1+ OVER - 1+ 9 /MOD                      ?DUP …∆ SWAP >R                          0 ƒœ 3 NSCR'S  PAGE Ãœœ–  R> ‘»≈Œ        ?DUP …∆ 1- 3 / 1+ 0                        ƒœ DUP 3SCR'S 3 + Ãœœ–  ‘»≈Œ DROP      –RTER UNLOCK  œUTPUT ! ;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \\ ÃONG SR FOR √16            CAS16AUG06                                                                                   ÕEMORY MODEL                                                                      $0000 - $8000 : ÃOW“¡Õ                   $8000 - $FFFF : »IGH“¡Õ  & “œÕ                                                    SWITCH TO “¡Õ      ”WITCH TO “œÕ         SYS CAN BE USED LIKE JSR                                                                                                   “œÕ-√ALL LIKE       '0FFD2 SYS'                                                    ROM JSR RAM  == $FF3E STA JSR $FF3F STA                                          NOT POSSIBLE IF »≈“≈ > $8000             «UESS WHY?                                                                        --- œN THE √64 ¬¡”…√ AND œ” CAN BE        BANKED SEPERATLY. ‘HIS MACROS ARE        ONLY NEEDED FOR THE BASIC “œÕ                                                                                                                                     \\  ÃONG SR FOR  √16          CAS16AUG06                                          ◊¡“Œ…Œ«! ”YSTEMCRASH IF USED INCORRECT                                                                                                                              THIS MAKRO MUST BE UNDER $8000                                                    A CALL LIKE ' $FFD2 SYSÕACRO'            WILL GENERATE                               PHA                                      $FF # LDA  ÃœŒ«1 2+ STA                  $D2 # LDA  ÃœŒ«1 1+ STA                  PLA  ÃœŒ« JSR                         CALL IN “œÕ WILL BE DONE WITH A DETOUR                                                                                     SYS DECIDED IF DIRECT OR INDIRECT CALL                                                                                                                              ◊¡“Œ…Œ«! ⁄ERO-∆LAG WILL BE DESTROYED!                                                                                                                              ( TRANSIENT ∆ORTH-6502 ¡SSEMCLCAS16AUG06 ( ¬ASIS: ∆ORTH ƒIMENSIONS ÷œÃ ……… ŒO. 5)                                          ‘HE ¡SSEMBLER WILL BE LOADED COMPLETELY  INTO THE »≈¡– AND IS ONLY USABLE TILL    THE NEXT 'CLEAR' OR 'SAVE', AFTER THAT   HE IS COMPA                                                                                                                                             VOLKSFORTH 3.8-3††U3†2A††††                                                                                      ˇ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              LETE REMOVED FROM THE MEMORY.  ŸOU CANNOT USE IT, BUT IT ALSO DON'T     EATS UP VALUABLE MEMORY.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \ FREE                        CAS16AUG06                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \\ FOR TRACER:LOADSCREEN      CAS16AUG06                                                                                   ‘OƒO                                     ***∆OR THE NEXT VOLKS4TH VERSION ****                                             ”YNC <…– …–>-HANDLING WITH ¡TARI AND     √–Õ                                      HERE SOME EXAMPLES TO TEST                                                                                                 ‹ : AA DUP DROP ;                        ‹ : BB AA ;                              \\                                       DEBUG BB                                 TRACE' AA                                                                         TRACE' ∆ORTH                                                                                                                                                        …– 2INC IS DONE ON √¬Õ-¡TARI BEFORE OR   AFTER                                                                                                                     \\ FOR TRACER:WCMP VARIABLES  CAS16AUG06                                                                                                                            USED LIKE THIS       ADR1 ADR2 WCMP      COMPARES WHOLE WORD, RESULT IS                √ARRY=1  : (ADR1) >= (ADR2)              √ARRY=0  : (ADR1) <  (ADR2)         ALL OTHER FLAGS ARE NOT DEFINED                                                                                            ‘EMPORARY STORAGE FOR ◊                  AREA TO BE TRACED                        ∆LAG: TRACE WORD     ∆LAG: TRACE YES?NO  UNKNOWN              LEVEL OF NESTING                                                                                                                                                                                                                                                                                                                                                                                                                             \ FOR TRACER:CPUSH ONELINE    CAS16AUG06                                                                                                                                                                     SAVES Ã≈Œ BYTES FROM ¡ƒƒ“ ON THE RETURN  STACK. THE NEXT ’ŒŒ≈”‘ OR ≈ÿ…‘ WILL      PLACE THEM BACK                                                                                                            ÕAIN LOOP                                COMMAND CAN BE ENTERED                                                                                                                                              GETS AREA TO TRACE                                                                                                                                                                                                                                                                                                                                                                                                       \ FOR TRACER:STEP TNEXT       CAS16AUG06                                          WILL BE USED AT THE END OF ‘Œ≈ÿ‘,         TO ENABLE ‘“¡–? AGAIN AND TO FIX THE     BROKEN Œ≈ÿ‘-“OUTINE                                                                                                                                                                                                                                  ‘HIS “OUTINE WILL BE PATCHED ON Œ≈ÿ‘     AND IS THE KEY PART OF THE TRACER         IF NO TRACED:                            TRACE CURRENT ◊œ“ƒ?                         NO:   IS …– INSIDE THE DEBUG AREA?             NO: THEN GO                        YES:  DELETE HALF! PART                                                        DISABLE TRAP? ( THE TRACER SHOULDN'T     TRACE ITSELF )                                                                                                                                                                                                                                      \ TRACER:..TNEXT              CAS16AUG06                                          ∆ORTH-–ART OF ‘Œ≈ÿ‘                       TRACE INTO CURRENT ◊œ“ƒ?                   YES: PUSH ƒ≈¬’« AREA, INCREMENT NEW           NESTINGLEVEL                      ”‘≈– SHOULD BE EXECUTED LATER            –’”»ED ALL IMPORTANT DATA                                                         PRINT INFORMATION LINE                                                                                                                                              –’”»ED MORE DATA                                                                  –’”»ED THE “ETURN-”TACK-–OINTER !!       AND PRETENDS AN EMPTY “ETURN-”TACK       CONNECTS œŒ≈Ã…Œ≈ INTO THE                Õ¡…Œ-√œÕÕ¡Œƒ-Ãœœ– AND CALLS IT                                                                                                                                                                                                                                                               \ TRACER:DO-TRACE TRACEABLE   CAS16AUG06                                          INSTALLS (PATCHED) ‘Œ≈ÿ‘ INTO Œ≈ÿ‘        (Œ≈ÿ‘ IS THE INNERST “OUTINE,             THAT ENDS EVERY WORD DEFINITION)                                                                                                                                                                           CHECKS, WETHR A WORD CAN BE TRACED         AND LOOKS UP ITS ADDRESS                :      -DEF.  <…–=CFA+2                  …Œ–’‘: -DEF.  <…– FROM INPUT-÷EKTOR                                               œ’‘–’‘:-DEF.  <…– FROM OUTPUT-÷EKTOR                                              ƒ≈∆≈“  -DEF.  <…– FROM  [CFA+2]                                                   ƒœ≈”>  -DEF.  <…–=[CFA]+3                                                         ALL OTHER DEFINITIONS WON'T WORK                                                                                                                                                                           \ TRACER:USER WORDS           CAS16AUG06                                          Œ≈”‘ ENTERS A WORD FOR TRACING                                                                                             ’ŒŒ≈”‘ CONTINUES PROGRAM EXECUTION TO         THE END OF TRACED WORD                                                       ≈ŒƒÃœœ– START TRACING AFTER NEXT WORD         (USABLE INSIDE LOOPS)                                                        ’Œ¬’« DISABLES TRACING                                                                                                                                                                                                                                                                         ƒ≈¬’« <WORD> MARKS THE WORD TO BE             TRACED. …F <WORD> IS CALLED, THE         TRACER KICKS IN                                                                                                       ‘“¡√≈' WILL CALL <WORD> AND START TRACE.                                         \\ TOOLS FOR DECOMPIL         CAS16AUG06                                          \ IF THE WORD                                                                                                              : TEST 5   0   ƒœ    ." DO YOU LIKE ME?"     KEY ¡SCII Y =                            …∆   ." YOUR FAULT " LEAVE               ≈Ã”≈ ." YES SURE! " ‘»≈Œ Ãœœ–          ." !" ;                                                                         \\ SHOULD BE INSPECTED,                                                                                                      PLEASE TURN PAGE..>                                                                                                                                                                                                                                                                                                                                                                                                                                             \  TOOLS FOR DECOMPIL         CAS16AUG06                                          CR                                       TOOLS                                    TRACE' TEST                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 \                             CAS16AUG06                                          SET ORDER TO ∆œ“‘» ∆œ“‘» œŒÃŸ   ∆œ“‘»                                                                                                                                                                        FOR MULTITASKING                                                                                                                                                    √ENTRONICS-…NTERFACE ON ’SER-–ORT        (S ‘EXT TILL ) WILL BE SKIPPED           SERIAL …NTERFACE (COMMENTED OUT)         (U ‘EXT TILL ) WILL BE SKIPPED                                                    LOAD NEXT SCREEN ONLY FOR SERIAL BUS                                                                                                                                                                                                                  REMOVE UNNEDED WORD HEADERS                                                                                               \ ◊HEN USING THE SERIAL       CAS16AUG06 BUS, SENDIND CHARS ONE BY ONE IS TOO     SLOW                                                                              ¬UFFER FOR CHRS TO SEND TO PRINTER                                                ADD CHAR TO BUFFER                                                                                                         ¬UFFER FULL?                                                                      PRINT BUFFER AND CLEAN                                                                                                                                              ÕAINROUTINE TO SEND TO SERIAL BUS        STORE CHAR                               IS ∆ORMFEED?                               YES, PRINT BUFFER INCL. ∆ORMFEED       IS ÃINEFEED?                             OR √“, OR IS THE BUFFER FILLED?            YES, PRINT BUFFER AND √“/Ã∆ MARKED                                                                                                                               \                             CAS16AUG06                                                                                   ÕAINROUTINE FOR CENTRONICS INTRFACE      SEND CHAR TO PORT , EMIT ”TROBE-≈DGE                                              WAIT FOR ¬USY-”IGNAL TO DISAPPEAR                                                                                          SEND CONTROLCODES TO PRINTR                                                                                                √ONTROLCODES FOR –RINTER IN »EX          REPRESENTATION                                                                    ¡DJUST IF NEEDED!                                                                 SEND ≈”√-”EQUENCE TO PRINTER                                                                                               ÃINEFEED IN …NCH                                                                  DISABLE ”UPERSCRIPT AND ”UBSCRIPT        SKIP PERFORATION ON/OFF                                                          \                             CAS16AUG06                                          ≈SCAPE + 2 √HARS                                                                   ONLY FOR «OERLITZ-…NTERFACE                                                      SPECIAL ≈PSON-√ONTROLMODE                                                           √OPY OF –RINTER-√ONTROL-“EGISTER                                                SWITCH ¬IT IN CONTROL REGISTER ON                                                                                                                                   SWITCH ¬IT IN CONTROL REGISTER OFF                                                                                                                                  ‘HESE √ONTROLCODES NEED TO BE ADJUSTED   FOR OTHER PRINTERS WITH CTRL: ≈”√2       AND PRN                                                                           ÃINEWIDTH IN CHARACTERS PER INCH         REPLACE WITH ≈LITE, –ICA OR √OMPRESS IF  NEEDED                                  \                             CAS16AUG06                                          ADJUST THESE IF NEEDED                                                                                                                                              √ALL AS        66 LINES                  √ALL AS        11 "LONG                  ∆ONTS, CAN BE EXTENDED                                                                                                     …NITIALIZING ...                          . FOR «OERLITZ-…NTERFACE                                                                                                   . FOR √ENTRONICS:  –ORT ¬ ON SEND                   –¡2 ON SEND FOR ”TROBE                                                ∆LAG FOR CHAR-CONVERT                                                             ENABLE PRINTER WITH STANDARDVALUES                                                                                                                                                                                                        CAS16AUG06                                          CONVERT √OMMODORE'S ”PECIAL-¡SCII IN     STANDARD ¡”√……                                                                                                                                                                                                                                                                                 “OUTINES FOR PRINTING            COMMAND                                                                                   SEND CHR TO PRINTER              EMIT    √“ AND Ã∆ TO PRINTER             CR      DELETE CHAR          (?!)        DEL     EMIT FORMFEED                    PAGE    POSITION PROTERHEAD ON COLUMN    AT      AND ROW, NEW PAGE IF NECESSARY                                                                                                                                      GET PRINTHEAD POSITION           AT?     EMIT STRING                      TYPE                                                                          CAS16AUG06                                          CREATE OUTPUTTABLE  >PRINTER                                                      “OUTINES FOR PRINTER AND SCREEN          (BOTH)                                                                            œUTPUT FIRST ON ”CREEN                   ( “OUTINES FROM ƒ…”–Ã¡Ÿ )                AND ON PRINTER                           ( “OUTINES FROM >–“…Œ‘≈“ )                                                                                                                                          CREATE OUTPUTTABLE >BOTH                                                                                                                                            WORDS ARE AVALABLE FROM ∆ORTH                                                     SWITCH OUTPUT TO PRINTER                                                          SWITCH OUTPUT TO SCREEN AND PRINTER                                                                                                                     CAS16AUG06                                                                                                                            PRINT TWO SCREEN SIDE BY SIDE            SCREENNUMBER IN BOLD AND 17CPI                                                                                             FORMATTED OUTPUT OF BOTH ”CREENS                                                                                                                                                                             WILL PRINT SCREEN THIS:    1    3        WAY                        2    4                                                 PRINTS SCRREN FROM TO                    STORE œUTPUTDEVICE AND ENABLE PRINTER    CALCULATE PRINTPOSITION FOR EACH         ”CREEN AND PRINT ACCORDING TO LAYOUT                                                                                                                                                                                                                                               CAS16AUG06                                                                                                                            LIKE 2SCR'S (WITH ”HADOW)                                                                                                                                                                                                                                                                                                                                                        LIKE NSCR'S (WITH ”HADOW)                                           SCREEN ”HADOW                            SCR+1  ”H+1                                                                                     LIKE PTHRU  (WITH ”HADOW)                                                                                                                                                                                                                                                                                                   CAS16AUG06                                                                                                                            SAME AGAIN FOR STANDARD FORTH SCREENS    WITH 16 LINES AND 64 CHARS                                                                                                                                                                                                                                                                                                              SEE ABOVE                                                                                                                  LIKE PTHRU, BUT FOR STANDARD SCREENS                                                                                                                                                                                                                                                                                                                                                                          CAS16AUG06                                                                                                                            PRINT FAST INDEX ON PRINTER                                    12" –APIERSIZE      SKIP PERFORATION                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ¬ACKGROUND PRINT              CAS16AUG06                                          ÕULTITASKER IS NEEDED                                                             √REATE WORKAREA FOR TASK                                                          ENABLE BACKGROUD PRINTING                 FROM TO WILL BE PASSED TO TASK           ON NEXT –¡’”≈ THE TASK WILL EXECUTE      PTHRU AND WILL GO TO SLEEP                                                                                                ABORT BACKGROUND TASK                     TASK WILL BE ACTIVATED TO GO TO SLEEP    AGAIN IMMEDITALY                                                                                                                                                                                                                                                                                                                                                                                                                                                 \\    –RINTER INTERFACE 1526  CAS16AUG06                                          ‘HIS DRIVER ALSO WORKS WITH:                                                       √16 & √…‘…⁄≈Œ-100ƒÕ \ SEE »ANDBOOK                                                                                                                                                                                                                   ∆∆ : ∆ORMFEED IS MISSING HERE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       CLV14OCT87                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        