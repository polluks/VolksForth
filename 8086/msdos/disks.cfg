\                                                 ks 08 aug 88    INCLUDE DISKS.CFG                                               allows to specify disk capacities interactively.                                                                                3 LOADFROM DISKS.CFG                                            sets the hard-disk capacity according to the information        specified via the FDISK.COM command.                                                                                            After the capacities have been set, the values can be           made permanent with the SAVESYSTEM command.                                                                                                                                                                                                                                                                                                                                                                                                                   \ getting an input number                            cas 10nov05  Onlyforth Dos also                                                                                                              : input#  ( <string> -- n )  pad c/l expect                        pad span @ 2dup upper pad place                                 pad nullstring? IF  0 exit  THEN  number drop ;                                                                              2 load                                                                                                                        cr cr                                                           .( This configuration can be stored with SAVESYSTEM <name>. )                                                                                                                                                                                                                                                                                                                                   \ configuring disk capacities                        cas 10nov05  page                                                                                                                            .( volksFORTH supports up to 6 logical drives in DIRECT Mode)                                                                 cr .( Enter the maximal capacity of the drives below: )         cr                                                                                                                                cr .( A: ) input# capacities !                                  cr .( B: ) input# capacities 2+ !                               cr .( C: ) input# capacities 4 + !                              cr .( D: ) input# capacities 6 + !                              cr .( E: ) input# capacities 8 + !                              cr .( F: ) input# capacities &10 + !  toss empty                                                                                                                                              \ Winchester boot sector capacity determination      cas 11nov05  Onlyforth \needs Assembler   2 loadfrom asm.fb                                                                                  Code get-boot  ( addr -- f )   $201 # A mov   1 # C mov            R W mov   D R mov   $80 # D mov   $13 int                       W R mov   0 # D mov  CS not ?[  D dec  ]?  Next              end-code                                                                                                                        : set-capacities  [ Dos ] 5  BEGIN  pad get-boot                   IF  capacities 4 +   pad [ $1BE $C + ] Literal +                    $40 bounds DO  I @ ?dup IF  2/ over !  THEN  2+                            $10 +LOOP   2drop exit                           THEN  1- ?dup 0= UNTIL                                          true Abort" Bootsector can't be read" ;                                                                                      set-capacities   empty                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        